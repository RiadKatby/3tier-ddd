@model FieldModel
@*@{ 
    var prefix = "Fields";
}*@
<h3>Fields</h3>


@Html.DisplayNameFor(d => d.Name)
@Html.TextBoxFor(m => m.Name)
@Html.ValidationMessageFor(v => v.Name)

@Html.DisplayNameFor(d => d.Type)
@Html.TextBoxFor(m => m.Type)
@Html.ValidationMessageFor(v => v.Type)

@Html.DisplayNameFor(d => d.Length)
@Html.TextBoxFor(m => m.Length)
@Html.ValidationMessageFor(v => v.Length)

<button type="button" onclick="AddField()">Add</button>

<br />
<br />
<table id="fieldsTable" width="100%" border="1">
    <thead><tr><th>Name</th><th>Type</th><th>Length</th></tr></thead>
    <tbody>

    </tbody>
    @*@for (int i = 0; i < Model.l; i++)
    {

    }
    @foreach (var item in Model)
    { }*@
        @*<tr>
            <td><span>@item.Name</span><input type="hidden" value="@item.Name" id="Fields.Name" /></td>
            <td><span>@item.Type</span><input type="hidden" value="@item.Type" id="Fields.Type" /></td>
            <td><span>@item.Length</span><input type="hidden" value="@item.Length" id="Fields.Length" /></td>
            <td><button onclick="RemoveField(1)">X</button></td>
        </tr>*@
    
</table>

<script>
    function AddField() {
        var name = $("#Fields_Name").val();
        var type = $("#Fields_Type").val();
        var length = $("#Fields_Length").val();

        var rowCount = $('#fieldsTable tbody tr').length;
        var rowHtml = '<tr><td><span>' + name + '</span><input type="hidden" value="' + name + '" id="Fields[' + rowCount + '].Name" /></td><td><span>' + type + '</span><input type="hidden" value="' + type + '" id="Fields[' + rowCount + '].Type" /></td><td><span>' + length + '</span><input type="hidden" value="' + length + '" id="Fields[' + rowCount + '].Length" /></td></tr>';
        $('#fieldsTable > tbody').append(rowHtml);
    }

    function RemoveField(index) {

    }
</script>