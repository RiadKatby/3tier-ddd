@using RefactorName.WebApp.Areas.Backend.Models
@using MvcHtmlHelpers
@model List<ActionAddModel>

<div>
    <div id="messageContainer" class="alert info" style='width:100%;display:@ViewBag.Style'>
        <span class="closebtn" onclick='this.parentElement.style.display="none";'>&times;</span>
        <strong>Info!</strong><span id="message"> @ViewBag.Message</span>
    </div>
    @using (Html.MCIBeginItemsCol(12))
    {
        {
            using (Html.BeginForm())
            {
                @Html.AntiForgeryToken()
                <div class="panel panel-default">
                    <div class="panel-heading">Manage Actions</div>
                    <div class="panel-body">

                        @using (Html.MCIBeginItemsRow())
                        {
                            @*@Html.MCITextBoxItemFor(a => a.Name, httmlAttributes: new { maxLength = "100", id = "ActionName" })*@
                            @Html.MCITextBoxItem(name: "ActionName", defaultValue: "", labelText: "Action Name", httmlAttributes: new { maxLength = "100", id = "ActionName", name = "ActionName", value = "" })
                            @*@Html.MCIDropDownListItemFor(a => a.ActionTypeID, (SelectList)ViewBag.ActionTypes, null, httmlAttributes: new { id = "ActionTypeID" })*@
                            @Html.MCIDropDownListItem(selectList: (SelectList)ViewBag.ActionTypes, name: "ActionType", optionLabel: null, labelText: "Action Type", httmlAttributes: new { maxLength = "100", id = "ActionTypeID", name = "ActionTypeID", value = "" })
                            @*@Html.MCITextBoxItemFor(a => a.Description, httmlAttributes: new { maxLength = "255", id = "ActionDescription" })*@
                            @Html.MCITextBoxItem(name: "ActionDescription", defaultValue: "", labelText: "Action Description", httmlAttributes: new { maxLength = "100", id = "ActionDescription", name = "ActionDescription", value = "" })
                            @*@Html.HiddenFor(s => s.ProcessId, new { id = "ProcessId" })*@
                            <input type="hidden" id="ProcessId" value="@ViewBag.ProcessId" />
                        }
                        @using (Html.MCIBeginItemsCol(0))
                        {

                            using (Html.MCIBeginItemsCol(0))
                            {
                                <button type="button" id="btnSave" class="btn btn-primary" onclick="Save(event)">Add</button>
                                <div style="padding:10px;">
                                    <div id="DivNoData" class="well well-sm center-block" style="position: relative; top: 50%; transform: translateY(0%);visibility:visible">No Data Found</div>
                                    <div id="grid_div" class="well well-sm center-block table-responsive" style="position: relative; top: 50%; transform: translateY(0%);visibility:hidden ">
                                        <table id="groups_table" class="table table-striped table-bordered table-hover table-condensed">
                                            <thead>
                                                <tr>
                                                    <td style="display:none;width:0%">Index </td>
                                                    <td style="width:40%;text-align:center">Name </td>
                                                    <td style="width:40%;text-align:center">Action Type Name</td>
                                                    <td style="width:10%;text-align:center">Delete</td>
                                                    <td style="width:10%;text-align:center">Edit</td>
                                                </tr>
                                            </thead>
                                            <tbody jput="actionRows" jput-jsondata='[]'>
                                                <tr>
                                                    <td style="display:none">{{index}}</td>
                                                    <td>{{json.ActionName}}</td>
                                                    <td>{{json.ActionTypeName}}</td>
                                                    <td>
                                                        <a href="#" onclick="DeleteActionRow(event,{{index}})">
                                                            <span class="glyphicon glyphicon-remove"></span>
                                                        </a>
                                                    </td>
                                                    <td>
                                                        <a href="#" onclick="EditActionRow(event,{{index}})">
                                                            Edit
                                                        </a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="panel-footer text-left" style="border:none">
                                    @*@Html.HiddenFor(s => s.ProcessId)*@
                                    @*@Html.AcionLinkWithInnerHtml("Back", "Index", routeValues: new { ls = true }, htmlAttributes: new { @class = "btn btn-default" })*@
                                    @*@Html.MCISubmitButton("Next", htmlAttributes: new { @class = "btn btn-primary" })*@
                                    <input type="button" value="Back" onclick="Back()" class="btn btn-primary" />
                                    <input type="button" value="Next" onclick="SubmitForm()" class="btn btn-primary" />
                                    <input type="button" value="Reload" onclick="Reload()" class="btn btn-primary" />
                                </div>
                            }
                        }
                    </div>
                </div>
            }
        }
    }
</div>
<div>
    @using (Html.MCIBeginItemsCol(12))
    {
        {
            using (Html.BeginForm())
            {
                @Html.AntiForgeryToken()
                
            }
        }
    }
    @{
        var model = new System.Web.Script.Serialization.JavaScriptSerializer();
        var modelJson = model.Serialize(Model);
    }
</div>

<script src="~/EnDesign/js/jput-2.js"></script>
<link rel="stylesheet" href="~/EnDesign/css/style.css" />
@*<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">*@

<script type="text/javascript">
    var model = JSON.parse('@Html.Raw(modelJson)');
    var CreateActionsURL = '@Url.Action("CreateActions")';
    var BackToActivityTargetsURL = '@Url.Action("BackToActivityTargets")';
    var BackToActionsURL = '@Url.Action("BackToActions")';
</script>
<script src="~/WorkflowJS/ProcessManagement/ActionManagement.js"></script>
