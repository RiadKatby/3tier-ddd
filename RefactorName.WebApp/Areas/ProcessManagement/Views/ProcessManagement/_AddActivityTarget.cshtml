@using RefactorName.WebApp.Areas.Backend.Models
@using MvcHtmlHelpers
@model List<ActivityTargetAddModel>
<div>
    <div id="messageContainer" class="alert info" style='width:100%;display:@ViewBag.Style'>
        <span class="closebtn" onclick='this.parentElement.style.display="none";'>&times;</span>
        <strong>Info!</strong><span id="message"> @ViewBag.Message</span>
    </div>
    @using (Html.MCIBeginItemsCol(12))
    {

        {
            using (Html.BeginForm())
            {
                @Html.AntiForgeryToken()
                <div class="panel panel-default">
                    <div class="panel-heading">Manage Activity Tragets</div>
                    <div class="panel-body">

                        @using (Html.MCIBeginItemsRow())
                        {
                            @Html.MCIDropDownListItem(selectList: (SelectList)ViewBag.Activities, name: "ActivityId", optionLabel: null, labelText: "Activity", httmlAttributes: new { maxLength = "100", id = "ActivityId", name = "ActivityId", value = "" })
                            @Html.MCIDropDownListItem(selectList: (SelectList)ViewBag.Targets, name: "TargetId", optionLabel: null, labelText: "Target", httmlAttributes: new { maxLength = "100", id = "TargetId", name = "TargetId", value = "" })
                            @Html.MCIDropDownListItem(selectList: (SelectList)ViewBag.Groups, name: "GroupId", optionLabel: null, labelText: "Group", httmlAttributes: new { maxLength = "100", id = "GroupId", name = "GroupId", value = "" })
                            <input type="hidden" id="ProcessId" value="@ViewBag.ProcessId" />
                        }
                        <button type="button" id="btnSave" class="btn btn-primary" onclick="Save(event)">Add</button>
                    </div>
                    
                    @using (Html.MCIBeginItemsCol(12))
                    {
                        <div style="padding:10px;">
                            <div id="DivNoData" class="well well-sm center-block" style="position: relative; top: 50%; transform: translateY(0%);visibility:visible">No Data Found</div>
                            <div id="grid_div" class="well well-sm center-block table-responsive" style="position: relative; top: 50%; transform: translateY(0%);visibility:hidden ">
                                <table id="groups_table" class="table table-striped table-bordered table-hover table-condensed">
                                    <thead>
                                        <tr>
                                            <td style="display:none;width:0%">Index </td>
                                            <td style="width:30%">Activity </td>
                                            <td style="width:30%">Target</td>
                                            <td style="width:20%">Group</td>
                                            <td style="width:10%">Delete</td>
                                            <td style="width:10%">Edit</td>
                                        </tr>
                                    </thead>
                                    <tbody jput="activityTargetRows" jput-jsondata='[]'>
                                        <tr>
                                            <td style="display:none">{{index}}</td>
                                            <td>{{json.ActivityName}}</td>
                                            <td>{{json.TargetName}}</td>
                                            <td>{{json.GroupName}}</td>
                                            <td>
                                                <a href="#" onclick="DeleteActivityTargetRow(event,{{index}})" id="delete">
                                                    <span class="glyphicon glyphicon-remove"></span>
                                                </a>
                                            </td>
                                            <td>
                                                <a href="#" onclick="EditActivityTargetRow(event,{{index}})" id="delete">
                                                    Edit
                                                </a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    }
                    <div class="panel-footer text-left" style="border: none">
                        <input type="button" value="Back" onclick="Back()" class="btn btn-primary" />
                        <input type="button" value="Next" onclick="submitForm()" class="btn btn-primary" />
                        <input type="button" value="Reload" onclick="Reload()" class="btn btn-primary" />
                    </div>
                </div>
            }
        }
    }
    @{
        var model = new System.Web.Script.Serialization.JavaScriptSerializer();
        var modelJson = model.Serialize(Model);
    }
</div>

<script type="text/javascript">
    var model = JSON.parse('@Html.Raw(modelJson)');
    var CreateActivityTargetsURL = '@Url.Action("CreateActivityTargets")';
    var BackToActivitiesURL = '@Url.Action("BackToActivities")';
    var BackToActivityTargetsURL = '@Url.Action("BackToActivityTargets")';
</script>
<script src="~/EnDesign/js/jput-2.js"></script>
<script src="~/WorkflowJS/ProcessManagement/ActivityTargetManagement.js"></script>
